\ SPDX-FileCopyrightText: (C) 2025 Siemens
\ SPDX-License-Identifier: MIT
.TH ftrace-to-ctf 1 "December 2025" "ftrace-to-ctf @VERSION@" "User Commands"
.SH NAME
ftrace-to-ctf \- Convert ftrace trace data (trace.dat) to CTF format
.SH SYNOPSIS
\fBftrace-to-ctf\fR [\fB-b\fR \fIbegin\fR] [\fB-c\fR \fIctf-version\fR] [\fB-d\fR \fItrace-datetime\fR] [\fB-e\fR \fIend\fR] [\fB-l\fR] [\fB-n\fR \fItrace-name\fR] [\fB-o\fR \fIclock-offset\fR] [\fB-u\fR \fIclock-uid\fR] [\fB-v\fR] \fItrace.dat\fR [\fIlttng-trace\fR] \fIoutdir\fR
.SH DESCRIPTION
\fBftrace-to-ctf\fR constructs and executes a Babeltrace2 graph that reads ftrace data (produced by \fBtrace-cmd\fR in a \fItrace.dat\fR file) and writes it to a CTF (Common Trace Format) directory.  The program can optionally merge a LTTng trace, trim the trace by timestamps, and set various metadata such as clock offset, clock UID, trace name and creation datetime.
.PP
The tool supports both CTF version 1.8 (default) and CTF version 2, automatically selecting the appropriate MIP version for the Babeltrace2 sink.
.SH OPTIONS
.TP
\fB-b, --begin \fIts\fR
Skip events until the given timestamp.  The value is passed to the Babeltrace2 trimmer filter as the \fBbegin\fR parameter.
.TP
\fB-c, --ctf-version \fIv\fR
CTF version to use.  Accepted values are \fB1\fR, \fB1.8\fR (default) and \fB2\fR.  The program maps the version to the corresponding MIP version (0 for 1/1.8, 1 for 2).
.TP
\fB-d, --trace-dt \fIname\fR
ISO‑8601 timestamp of the trace.  Stored in the CTF metadata as \fBtrace-creation-datetime\fR.
.TP
\fB-e, --end \fIts\fR
Trim events after the given timestamp.  Passed to the trimmer filter as the \fBend\fR parameter.
.TP
\fB-l, --lttng\fR
Convert well‑known events to the LTTng representation.  When this flag is set, a second source component is added for the optional LTTng trace.
.TP
\fB-n, --trace-name \fIname\fR
Name of the trace (session).  Stored in the CTF metadata as \fBtrace_name\fR.
.TP
\fB-o, --clock-offset \fIoffset\fR
Trace clock offset in nanoseconds relative to the world clock.  If omitted, the program attempts to read the offset from a provided LTTng trace.
.TP
\fB-u, --clock-uid \fI(uid|uuid)\fR
Clock UID (or UUID, depending on the MIP version).  Stored in the CTF metadata as \fBclock-uid\fR.
.TP
\fB-v, --verbose\fR
Increase logging level.  Can be repeated to make the output more verbose.
.TP
\fB-h, --help\fR
Show the usage message and exit.
.SH POSITIONAL ARGUMENTS
.TP
\fItrace.dat\fR
Path to the ftrace trace file generated by \fBtrace-cmd\fR.
.TP
\fIlttng-trace\fR
(Optional) Path to a LTTng trace directory.  Required only when \fB--lttng\fR is used.
.TP
\fIoutdir\fR
Directory where the resulting CTF files will be written.  Must be writable.
.SH EXAMPLES
.nf
#Convert a simple ftrace trace
ftrace-to-ctf trace.dat outdir

#Convert with LTTng trace and custom clock offset
ftrace-to-ctf -l -o 123456789 trace.dat /path/to/lttng outdir

#Trim the trace between two timestamps
ftrace-to-ctf -b 2023-01-01T00:00:00Z -e 2023-01-01T01:00:00Z trace.dat outdir
.fi
.SH AUTHOR
Felix Moessbauer <felix.moessbauer@siemens.com>
.SH COPYING
Copyright (C) 2025 Siemens. This program is licensed under the MIT license.
.SH SEE ALSO
\fBtrace-cmd\fR(1), \fBbabeltrace2\fR(1)
